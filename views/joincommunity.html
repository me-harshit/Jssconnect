<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Compiled and minified CSS -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


  <!--Google fonts-->
  <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/index.css" />
  <link rel="stylesheet" href="/profile.css" />
  <!--Font Awesome-->
  <script src="https://kit.fontawesome.com/efd71d3ed7.js" crossorigin="anonymous"></script>

  <link rel="icon" href="public/images/favicon.ico" type="image/x-icon">
  <title>JssConnect|Join Community</title>

  <style>
    #navbar {
      font-family: 'Cairo', sans-serif;
      letter-spacing: 1px;
      width: 100%;
      font-weight: 600;
      position: fixed;
      top: 0px;
      z-index: 200;
      box-shadow: none;
    }

    #navbar ul li a:hover {
      background-color: rgba(0, 0, 0, 0.3);
    }


    @media screen and (max-width: 1000px) {
      #logoText {
        display: none;
      }
    }

    #newsBtn {
      border-radius: 15px;
      padding: 7px;
      font-size: 1.2rem;
      border: 2px solid white;
      cursor: pointer;
      background-color: #434e52;
      color: white;
    }

    #newsBtn:hover {
      filter: saturate(10);
      /* background-color: aqua; */
    }

    .socials:hover {
      filter: saturate(3);
    }

    .myFloatingBtn:hover {
      transform: rotate(360deg);
      transition: 0.7s linear all;
    }

    #container {
      margin-top: 20px;
    }

    .socials {
      font-size: 2rem;
      margin: 10px;
    }

    #wave {
      background-image: linear-gradient(to bottom, #2c7873, #2c7873);
      background-position: left top;
      background-size: 100%;
      background-repeat: no-repeat;
      position: relative;
      color: #FFFFFF;
      height: 650px;
      display: flex;
      /* justify-content: center; */
      align-items: center;
    }

    #wave:after {
      content: "";
      display: block;
      position: absolute;
      background: url(https://cdn1.byjus.com/byjusweb/img/home/svg/banner_mobile_wave_bottom.svg) no-repeat;
      background-size: 100%;
      background-position: left bottom;
      left: 0;
      bottom: -1px;
      width: 100%;
      height: inherit;
      z-index: 10;
    }

    #join {
      text-align: center;
      margin: 75px;
      margin-bottom: 120px;
    }

    #join form {
      /* margin: 145px; */
      display: block;
      width: 45%;
      margin: 0 auto;
    }

    #join form input {
      display: block;
      margin: 20px 0;
      /* width: 45%; */
    }

    #join form button {
      margin: 30px 0;
    }

    @media (min-width: 768px) {
      #wave:after {
        background: url(https://cdn1.byjus.com/byjusweb/img/home/svg/banner_wave_bottom.svg) no-repeat;
        background-size: 100%;
        background-position: left bottom;
      }
    }

    #wave img {
      width: 30%;
      margin: 0;
    }

    @media (min-width: 350px) and (max-width: 754px) {
      #wave {
        height: 900px;
        padding-bottom: 30px;
        justify-content: flex-start;
      }
    }

    @media screen and (max-width: 750px) {
      #join h2 {
        font-size: 2.7rem;
      }

      #join form {
        width: 75%;
        margin: 0 auto;
      }

      #container {
        margin-top: 55px;
      }

      #wave {
        flex-direction: column;
        padding-top: 45px;
      }

      #wave img {
        width: 70%;
        max-width: 360px;
        display: block;
        margin: 0 auto;
      }
    }

    .day {
      display: none;
    }
  </style>

</head>

<body>

  <!--Navbar-->
  <nav id="navbar" style="background-color: #2c7873">
    <div class="nav-wrapper">
      <a href="/" class="brand-logo"><img src="public/images/logo.png" alt=""
          style="width: 75px;margin-top: 7px;filter: invert();" /></a>
      <a href="/" class="brand-logo" id="logoText" style="margin-left: 75px; font-size: 2rem">JSS Connect</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul id="main-menu" class="right hide-on-med-and-down">

        <li><a href="/blogs">Blogs</a></li>
        <li><a href="/resources">Resources</a></li>
        <li><a href="/community">Community</a></li>
        <li><a href="/contribute">Contribute</a></li>
        <li><a href="/contact">Contact</a></li>
        <li class="tooltip" id="userProfile">
          <span class="myChip" style="margin: 10px 30px;">
            <img src="https://cdn5.vectorstock.com/i/thumb-large/54/69/male-user-icon-vector-8865469.jpg" id="picture"
              alt="Person" width="96" height="96">
            <span id="chipName">Guest</span>
          </span>
          <span class="tooltiptext">
            <h6 id="username">Guest</h6>
            <h6 id="email">guest@guest.com</h6>
            <a class="waves-effect waves-light btn profBtn" style="margin: 10px auto;" id="logBtn"
              href="/logout">Logout</a>
            <a class="waves-effect waves-light btn profBtn" style="margin: 10px auto;" id="regBtn"
              href="/register">Login/Register</a>
          </span>
        </li>
      </ul>
    </div>
  </nav>

  <ul class="sidenav" id="mobile-demo" style="background-color: #2c7873;">
    <br />
    <li class="tooltip" id="userProfile">
      <span class="myChip" style="margin: 10px 30px;">
        <img src="https://cdn5.vectorstock.com/i/thumb-large/54/69/male-user-icon-vector-8865469.jpg" id="picture1"
          alt="Person" width="96" height="96">
        <span id="chipName1">Guest</span>
      </span>
      <span class="tooltiptext" id="t1">
        <h6 id="username1">Guest</h6>
        <h6 id="email1">guest@guest.com</h6>
        <a class="waves-effect waves-light btn profBtn" style="margin: 10px auto;" id="logBtn1"
          href="/logout">Logout</a>
        <a class="waves-effect waves-light btn profBtn" style="margin: 10px auto;" id="regBtn1"
          href="/register">Login/Register</a>
      </span>
    </li>
    <li><a href="/blogs" style=" color: white;">Blogs</a></li>
    <li><a href="/resources" style=" color: white;">Resources</a></li>
    <li><a href="/contribute" style=" color: white;">Contribute</a></li>
    <li><a href="/community" style=" color: white;">Community</a></li>
    <li><a href="/contact" style=" color: white;">Contact</a></li>
  </ul>

  <!--Form -->

  <div id="container">
    <div id="wave">
      <img src="public/images/joincomm.png" style="margin: 10%;" alt="Join">
      <div style="text-align:center;">
        <h2 style="color: white;">Join the community</h2>
        <h5>Inspire.Impact.Support.</h5>

      </div>
    </div>
    <div id="join">

      <h4 style="color: #64958f;">Fill the form below</h4>
      <form action="/joincommunity" method="POST">

        <input type="text" name="name" placeholder="Your name" required>
        <input type="email" name="email" placeholder="Your E-mail" required>
        <select name="year" id="year" required>
          <option value="1st year">1st year</options>
          <option value="2nd year">2nd year</options>
          <option value="3rd year">3rd year</options>
          <option value="4th year">4th year</options>
        </select>
        <select name="department" id="department" required>
          <option value="CS">CS</option>
          <option value="IT">IT</option>
          <option value="ECE">ECE</option>
          <option value="EE">EE</option>
          <option value="EEE">EEE</option>
          <option value="ME">ME</option>
          <option value="CE">CE</option>
        </select>
        <input type="text" name="about" placeholder="Enter a short intro" required maxlength="70">
        <input type="text" name="gHub" placeholder="Enter Github profile URL(optional)">
        <input type="text" name="lIn" placeholder="Enter Linked In profle URL(optional)">


        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </form>
      <a href="/community"><button class="btn waves-effect waves-light green" style="margin-top: 60px;">View Community
          <i class="material-icons right">people_outline</i>
        </button>
      </a>
      <a href="https://jsswire.herokuapp.com"><button class="btn waves-effect waves-light purple"
          style="margin-top: 60px;margin-left: 60px;">Connect with wire
          <i class="material-icons right">chat</i>
        </button>
      </a>

    </div>



  </div>

  <!-- Floating button -->



  <!-- Footer -->

  <!-- <footer class="page-footer" style="background-color: #1a1a1a;margin-top:36px;"> -->
  <footer class="page-footer" style="background-color: #323232;margin-top:36px;">
    <div class="container">
      <div class="row">
        <div style="text-align: center;margin: 75px 0;">
          <h2>Letâ€™s stay connected.</h2>
          <form action="/newsletter" method="POST" style="margin: 30px 0px;">
            <input type="email" name="email" required placeholder="Enter your Email"
              style="width:40%;margin-right: 20px;color: white;" required>
            <button id="newsBtn" type="submit">Subscribe</button>
          </form>
          <p>Sign up to receive our newsletter and exclusive updates.</p>
          <div style="margin-top: 45px;">
            <a href="https://www.facebook.com/JssAcademyOfTechnicalEducationnoida/" class="socials"
              style="color: #1b6ca8;"><i class="fa fa-facebook-official"></i></a>
            <a href="https://twitter.com/jssatenoida?lang=en" class="socials" style="color: #3282b8;"><i
                class="fa fa-twitter-square"></i></a>
          </div>
        </div>
        <hr>
        <div class="col l3 offset-l1 s6">
          <h5 class="white-text">Quick Links</h5>
          <ul>
            <li><a class="grey-text text-lighten-3" href="/blogs">Blogs</a></li>
            <li><a class="grey-text text-lighten-3" href="/resources">Ebooks</a></li>
            <li><a class="grey-text text-lighten-3" href="/usercontributions">User Contributions</a></li>
            <li><a class="grey-text text-lighten-3" href="http://jsswire.herokuapp.com">Connect with wire</a></li>
            <li><a class="grey-text text-lighten-3" href="/contribute">Contribute</a></li>
          </ul>
        </div>
        <div class="col l3 offset-l1 s6">
          <h5 class="white-text">Recent Blogs</h5>
          <ul>
            <li><a class="grey-text text-lighten-3" href="/blogs">What to do when entering a college?</a></li>
            <li><a class="grey-text text-lighten-3" href="/blogs">What I Learned My Freshman Year of College</a></li>
            <li><a class="grey-text text-lighten-3" href="/blogs">A glimpse into Async JavaScript</a></li>
          </ul>
        </div>
        <div class="col l3 offset-l1 s6">
          <h5 class="white-text">Contact</h5>
          <ul>
            <li><a class="grey-text text-lighten-3" href="/contact">Contact Us</a></li>
            <li><a class="grey-text text-lighten-3" href="/contact#team">Our Team</a></li>
            <li><a class="grey-text text-lighten-3" href="/feedback">Feedback</a></li>
          </ul>
        </div>

      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
        <span>Â© &nbsp; jssconnect.herokuapp.com &nbsp; 2020</span>
        <span style="margin-left: 20%;">JSSconnnect</span>
        <a class="grey-text text-lighten-4 right" href="/privacy">Privacy Policy</a>
      </div>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
  <script>
    function addDarkmodeWidget() {
      new Darkmode().showWidget();
    }
    window.addEventListener('load', addDarkmodeWidget);
  </script>
  <script>
    const options = {
      bottom: '64px', // default: '32px'
      right: 'unset', // default: '32px'
      left: '32px', // default: 'unset'
      time: '0.5s', // default: '0.3s'
      mixColor: '#fff', // default: '#fff'
      backgroundColor: '#fff',  // default: '#fff'
      buttonColorDark: '#100f2c',  // default: '#100f2c'
      buttonColorLight: '#fff', // default: '#fff'
      saveInCookies: false, // default: true,
      label: 'ðŸŒ“', // default: ''
      autoMatchOsTheme: true // default: true
    }

    const darkmode = new Darkmode(options);
    darkmode.showWidget();
  </script>


  <script>
    // JS for floating buuton

    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('.fixed-action-btn');
      var instances = M.FloatingActionButton.init(elems);
    });

    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('.sidenav');
      var instances = M.Sidenav.init(elems);
    });
    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init(elems);
    });

    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init(elems);
    });


    const wave = document.getElementById('wave');
    const sidenav = document.querySelector('.sidenav');
    const brightness = document.getElementById('brightness');
    const foot = document.querySelector("footer");
    const navbar = document.querySelector("nav");
    let count = 0;
    brightness.addEventListener("click", () => {

      if (count < 1) {
        count = 1;
        localStorage.setItem("theme", "dark");

      }
      else if (count == 1) {
        count = 0;
        localStorage.setItem("theme", "light");
      }
      setTheme();
    })


    function setTheme() {

      const currentTheme = localStorage.getItem("theme");
      if (currentTheme == "dark") {
        navbar.style.backgroundColor = "#1b262c";
        sidenav.style.backgroundColor = "#1b262c";
        foot.style.backgroundColor = "#1b262c";
        wave.style.backgroundImage = "linear-gradient(to bottom,#1b262c ,#1b262c)";
        brightness.innerHTML = "<i class='fa fa-sun-o' style='color: goldenrod;'></i>"
      }
      else {
        navbar.style.backgroundColor = "#2c7873";
        sidenav.style.backgroundColor = "#2c7873";
        wave.style.backgroundImage = "linear-gradient(to bottom,#2c7873 ,#2c7873)";
        foot.style.backgroundColor = "#323232";
        brightness.innerHTML = "<i class='fa fa-moon-o' style='color: white;'></i>"
      }
    }

    // Js for profile


    let name = document.getElementById("username");
    let chipName = document.getElementById("chipName");
    let mail = document.getElementById("email");
    let picture = document.getElementById("picture");
    let name1 = document.getElementById("username1");
    let chipName1 = document.getElementById("chipName1");
    let mail1 = document.getElementById("email1");
    let picture1 = document.getElementById("picture1");
    let logBtn = document.getElementById("logBtn");
    logBtn.style.display = "none";
    let logBtn1 = document.getElementById("logBtn1");
    logBtn1.style.display = "none";
    let regBtn = document.getElementById("regBtn");
    let regBtn1 = document.getElementById("regBtn1");

    // const query = window.location.search.substring(1)

    const query = window.location.href.substr(0, window.location.href.indexOf('#'));
    const token = query.split('email=')[1]
    console.log(token);

    name.innerHTML = "Guest";
    mail.innerHTML = "guest@guest.com";
    picture.setAttribute("src", "https://cdn5.vectorstock.com/i/thumb-large/54/69/male-user-icon-vector-8865469.jpg");

    loadDoc();

    async function loadDoc() {
      const res = await fetch(`/profile/${token}`);
      const data = await res.json();

      console.log(data);
      console.log(data.length);
      if (data != "") {
        let username = data[0].name;
        let email = data[0].email;
        let img = data[0].picture;
        localStorage.setItem("username", username);
        localStorage.setItem("email", email);
        localStorage.setItem("img", img);
      }
      displayProfile();
    }

    function displayProfile() {

      let myUsername = localStorage.getItem("username")
      let myEmail = localStorage.getItem("email");
      let myImg = localStorage.getItem("img");

      //   M.toast({ html: `Welcome ${myUsername} to Jssconnect` });
      chipName.innerHTML = myUsername;
      name.innerHTML = "<i class='material-icons' style='display:inline;margin:9px;'>verified_user</i>"
      name.innerHTML += myUsername;
      mail.innerHTML = "<i class='material-icons' style='display:inline;margin:9px;'>email</i>"
      mail.innerHTML += myEmail;
      picture.setAttribute("src", myImg);
      logBtn.style.display = "block";
      logBtn1.style.display = "block";
      regBtn.style.display = "none";
      regBtn1.style.display = "none";

      chipName1.innerHTML = myUsername;
      name1.innerHTML = "<i class='material-icons' style='display:inline;margin:9px;'>verified_user</i>"
      name1.innerHTML += myUsername;
      mail1.innerHTML = "<i class='material-icons' style='display:inline;margin:9px;'>email</i>"
      mail1.innerHTML += myEmail;
      picture1.setAttribute("src", myImg);
    }


  </script>


</body>

</html>